®!
sC:\Users\robson.luz\source\repos\POC-elastic-kibana\POC-elastic-kibana.API\Controllers\WeatherForecastController.cs
	namespace 	
POC_elastic_kibana
 
. 
API  
.  !
Controllers! ,
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str 
, 
$str '
,' (
$str) /
,/ 0
$str1 7
,7 8
$str9 ?
,? @
$strA H
,H I
$strJ O
,O P
$strQ ]
,] ^
$str_ j
} 	
;	 

private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str ,
), -
]- .
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
_logger 
. 
LogInformation "
(" #
$str# ,
), -
;- .
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateTime 
.  
Now  #
.# $
AddDays$ +
(+ ,
index, 1
)1 2
,2 3
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
.   
ToArray   
(   
)   
;   
}!! 	
[## 	
HttpGet##	 
(## 
$str## 
)## 
]## 
public$$ 
IEnumerable$$ 
<$$ 
WeatherForecast$$ *
>$$* +
GetError$$, 4
($$4 5
)$$5 6
{%% 	
_logger&& 
.&& 
LogError&& 
(&& 
$str&& '
)&&' (
;&&( )
throw(( 
new(( 
	Exception(( 
(((  
$str((  1
)((1 2
;((2 3
})) 	
public++ 
void++ 
D++ 
(++ 
)++ 
{,, 	
var-- 
teste-- 
=-- 
$str-- 
;-- 
}.. 	
public00 
void00 
DD00 
(00 
)00 
{11 	
var22 
teste22 
=22 
$str22 
;22 
}33 	
public55 
void55 
DDD55 
(55 
)55 
{66 	
var77 
teste77 
=77 
$str77 
;77 
}88 	
}99 
}:: ½ 
UC:\Users\robson.luz\source\repos\POC-elastic-kibana\POC-elastic-kibana.API\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder

 
.

 
Services

 
.

 #
AddEndpointsApiExplorer

 (
(

( )
)

) *
;

* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Host 
. 

UseSerilog 
( 
( 
context 
, 
loggerConfiguration -
)- .
=>/ 1
{ 
loggerConfiguration 
. 
Enrich "
." #
FromLogContext# 1
(1 2
)2 3
. 
Enrich 
. 
WithMachineName #
(# $
)$ %
. 
WriteTo 
. 
Console 
( 
) 
. 
WriteTo 
. 
Elasticsearch "
(" #
new $
ElasticsearchSinkOptions ,
(, -
new- 0
Uri1 4
(4 5
context5 <
.< =
Configuration= J
[J K
$strK e
]e f
!f g
)g h
)h i
{  
AutoRegisterTemplate (
=) *
true+ /
,/ 0
IndexFormat 
=  !
$"" $
{$ %
context% ,
., -
Configuration- :
[: ;
$str; L
]L M
}M N
$strN T
{T U
contextU \
.\ ]
HostingEnvironment] o
.o p
EnvironmentNamep 
?	 €
.
€ 
ToLower
 ˆ
(
ˆ ‰
)
‰ Š
.
Š ‹
Replace
‹ ’
(
’ “
$str
“ –
,
– —
$str
˜ ›
)
› œ
}
œ 
$str
 ž
{
ž Ÿ
DateTime
Ÿ §
.
§ ¨
UtcNow
¨ ®
:
® ¯
$str
¯ ¶
}
¶ ·
"
· ¸
,
¸ ¹
NumberOfShards "
=# $
$num% &
,& '
NumberOfReplicas $
=% &
$num' (
} 
) 
. 
Enrich 
. 
WithProperty  
(  !
$str! .
,. /
context0 7
.7 8
HostingEnvironment8 J
.J K
EnvironmentNameK Z
!Z [
)[ \
. 
ReadFrom 
. 
Configuration #
(# $
context$ +
.+ ,
Configuration, 9
)9 :
;: ;
} 
) 
; 
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if"" 
("" 
app"" 
."" 
Environment"" 
."" 
IsDevelopment"" !
(""! "
)""" #
)""# $
{## 
app$$ 
.$$ 

UseSwagger$$ 
($$ 
)$$ 
;$$ 
app%% 
.%% 
UseSwaggerUI%% 
(%% 
)%% 
;%% 
}&& 
app(( 
.(( 
UseHttpsRedirection(( 
((( 
)(( 
;(( 
app** 
.** 
UseAuthorization** 
(** 
)** 
;** 
app,, 
.,, 
MapControllers,, 
(,, 
),, 
;,, 
app.. 
... 
Run.. 
(.. 
).. 	
;..	 
˜
]C:\Users\robson.luz\source\repos\POC-elastic-kibana\POC-elastic-kibana.API\WeatherForecast.cs
	namespace 	
POC_elastic_kibana
 
. 
API  
{ 
public 

class 
WeatherForecast  
{ 
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} 